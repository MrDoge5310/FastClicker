import pygame
from random import choice
from tkinter import messagebox
import sys


class Card:
    def __init__(self, x, y):
        self.x = x
        self.y = y
        self.color = 'red'
        self.rect = pygame.Rect(x, y, 100, 200)

    def drawCard(self):
        pygame.draw.rect(scr, self.color, self.rect)

    def clickMe(self):
        self.color = 'yellow'
        font = pygame.font.SysFont('verdana', 25).render('Click!', True, 'black')
        scr.blit(font, (self.rect.centerx - 30, self.rect.centery - 15))

    def clickOnCard(self):
        self.color = 'red'


def mouse_click(x, y):
    if x in range(chosed_card.rect.x, chosed_card.rect.x + chosed_card.rect.width) \
            and y in range(chosed_card.rect.y, chosed_card.rect.y + chosed_card.rect.height):
        chosed_card.clickOnCard()
        return True
    else:
        return False


pygame.init()
clock = pygame.time.Clock()

scr = pygame.display.set_mode((800, 600))
scr.fill('black')

score = 0
score_rect = pygame.Rect(0, 0, 120, 30)

time = 0
time_rect = pygame.Rect(680, 0, 120, 30)

x = 50
cards = []
for item in range(5):
    cards.append(Card(x + 150 * item, 300))

GameOver = False
timer = 0
while not GameOver:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            sys.exit()
        elif event.type == pygame.MOUSEBUTTONDOWN and event.button == 1:
            x, y = event.pos
            if mouse_click(x, y):
                score += 1

    for card in cards:
        card.drawCard()

    if timer == 0:
        timer = 10
        chosed_card = choice(cards)
        chosed_card.clickMe()
    else:
        timer -= 1

    if timer == 0:
        chosed_card.color = 'red'

    time += 0.1
    time_font = pygame.font.SysFont('verdana', 25).render('Time: ' + str(time), True, 'black')
    score_font = pygame.font.SysFont('verdana', 25).render('Score: ' + str(score), True, 'black')
    pygame.draw.rect(scr, 'white', score_rect)
    pygame.draw.rect(scr, 'white', time_rect)

    scr.blit(score_font, score_rect)
    scr.blit(time_font, time_rect)
    pygame.display.update()

    if time >= 10:
        GameOver = True

    clock.tick(10)

if score < 7:
    messagebox.showinfo("Fail", f"Game Over\nScore: {score}")
else:
    messagebox.showinfo("Success", f"You Won!\nScore: {score}")
